!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueSvgInlinePlugin=e():t.VueSvgInlinePlugin=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n={directives:{inline:"v-svg-inline",inlineSprite:"v-svg-inline-sprite"},attributes:{merge:["class","style"],add:[{name:"focusable",value:!1},{name:"role",value:"presentation"},{name:"tabindex",value:-1}],data:[],remove:["alt","src","data-src"]},xhtml:!1},i="vue-svg-inline-plugin-flags",o="vue-svg-inline-plugin-sprite",s=`${o}-container`,a=/.+\.svg(?:[?#].*)?$/i,u=/<svg(\s+[^>]+)?>([\s\S]+)<\/svg>/i,d=/\s*([:@]?[^\s=]+)[\s=]+(?:"([^"]*)"|'([^']*)')?\s*/g,c=/^[:@]?[a-z](?:[a-z0-9-:]*[a-z0-9])?$/i,l=/^v-/i,f=/\s+/g,p=/[\n\t]+/g,g=new Set([200,304]);e.default={install:(t=null,e={})=>{for(const t of["directives","attributes"])e[t]=Object.assign({},n[t],e[t]||{});e=Object.assign({},n,e);for(const t in e.directives){if(e.directives[t]=e.directives[t].toString().trim().toLowerCase(),!c.test(e.directives[t]))throw new TypeError(`Option is not valid! [options.directives.${t}="${e.directives[t]}"]`);e.directives[t]=e.directives[t].replace(l,"")}for(const t in e.attributes){if(!Array.isArray(e.attributes[t]))throw new TypeError(`Option is not valid! [options.attributes.${t}=${JSON.stringify(e.attributes[t])}]`);e.attributes[t]="add"===t?e.attributes[t].map(t=>({name:t.name.toString().trim().toLowerCase(),value:t.value.toString().trim()})):e.attributes[t].map(t=>t.toString().trim().toLowerCase()),e.attributes[t]=new Set(e.attributes[t])}if(e.xhtml=!!e.xhtml,e._fetch="fetch"in window,e._axios="axios"in window,!e._fetch&&!e._axios)throw new Error("Feature is not supported by browser! [fetch || axios]");e._observer="IntersectionObserver"in window,e._observer||console.error("Feature is not supported by browser! Disabling lazy processing of image nodes. [IntersectionObserver]");const r=new Map,w=new Set;let h;const m=()=>h||(h=(()=>{if(!e._observer)throw new Error("Feature is not supported by browser! [IntersectionObserver]");if(h)throw new Error("Can not create image node intersection observer, intersection observer already exists!");return new IntersectionObserver((t,e)=>{for(const r of t){if(!r.isIntersecting)continue;const t=r.target;S(t),e.unobserve(t)}})})());let v;const b=()=>v||(v=(()=>{if(v)throw new Error("Can not create SVG symbol container node, container node already exists!");const t=y(`<svg xmlns="http://www.w3.org/2000/svg" id="${s}" style="display: none !important;"></svg>`);return document.body.appendChild(t),document.getElementById(s)})()),y=(t="")=>{if(!t)throw new Error("Missing required argument! [string]");if(!(t=t.toString().trim()).startsWith("<")||!t.endsWith(">"))throw new TypeError(`Argument is not valid! [string="${t}"]`);return t=t.replace(p,""),document.createRange().createContextualFragment(t)},x=(t="")=>{if(!t)throw new Error("Missing required argument! [string]");t=t.toString().trim();const r=new Map;let n;for(d.lastIndex=0;n=d.exec(t);){n.index===d.lastIndex&&d.lastIndex++;const t=(n[1]||"").trim().toLowerCase();if(!t||t.startsWith("<")||t.endsWith(">"))continue;if(!c.test(t))throw new TypeError(`Attribute name is not valid! [attribute="${t}"]`);const i=(n[2]||n[3]||"").trim();r.set(t,i||(e.xhtml?t:""))}return r},S=(t=null)=>{if(!t)throw new Error("Missing required argument! [node]");if(!t.dataset.src&&!t.src)throw new Error("Missing required argument property! [node.data-src || node.src]");t.dataset.src&&(t.dataset.src=t.dataset.src.toString().trim()),t.src&&(t.src=t.src.toString().trim()),((t="")=>{if(!e._fetch&&!e._axios)throw new Error("Feature is not supported by browser! [fetch || axios]");if(!t)throw new Error("Missing required argument! [path]");if(t=t.toString().trim(),!a.test(t))throw new TypeError(`Argument is not valid! [path="${t}"]`);return new Promise((n,i)=>{const o={path:t};if(r.has(o.path))return o.content=r.get(o.path),n(o);(e._axios?axios.get:fetch).bind(window)(o.path).then(t=>{if(!g.has(0|t.status))throw new Error(`Wrong response status! [response.status=${t.status}]`);return e._axios?t.data.toString():t.text()}).then(t=>(o.content=t.trim(),r.set(o.path,o.content),n(o))).catch(i)})})(t.dataset.src||t.src).then(r=>{const n=((t=null,r=null)=>{if(!t)throw new Error("Missing required argument! [file]");if(!r)throw new Error("Missing required argument! [node]");if(!t.path)throw new Error("Missing required argument property! [file.path]");if(t.path=t.path.toString().trim(),!a.test(t.path))throw new TypeError(`Argument property is not valid! [file.path="${t.path}"]`);if(!t.content)throw new Error("Missing required argument property! [file.content]");if(t.content=t.content.toString().trim(),!u.test(t.content))throw new TypeError(`Argument property is not valid! [file.content="${t.content}"]`);if(!r.outerHTML)throw new Error("Missing required argument property! [node.outerHTML]");return r[i].has("sprite")&&(t.content=t.content.replace(u,(e,r,n)=>{const i=w.has(t.path),s=`${o}-${i?[...w].indexOf(t.path):w.size}`;if(!i){const e=y(`<svg xmlns="http://www.w3.org/2000/svg"><symbol id="${s}"${r}>${n}</symbol></svg>`);b().appendChild(e.firstChild.firstChild),w.add(t.path)}return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#${s}" href="#${s}"></use></svg>`})),t.content.replace(u,(t,n,i)=>{const o=r.outerHTML.toString().trim(),s=x(n),a=x(o);n=new Map([...s,...a]);const u=new Set(["class"]);for(const t of e.attributes.merge){const r=s.has(t)?s.get(t).split(f).filter(t=>!!t):[],i=a.has(t)?a.get(t).split(f).filter(t=>!!t):[];if(e.xhtml&&!r.length&&!i.length)continue;const o=[...r,...i];n.set(t,(u.has(t)?[...new Set(o)]:o).join(" ").trim())}for(const t of e.attributes.add){let r=t.value.split(f).filter(t=>!!t);if(n.has(t.name)){if(!e.attributes.merge.has(t.name))throw new Error(`Can not add attribute, attribute already exists. [${t.name}]`);const i=n.get(t.name).split(f).filter(t=>!!t);if(e.xhtml&&!r.length&&!i.length)continue;r=[...i,...r]}n.set(t.name,(u.has(t.name)?[...new Set(r)]:r).join(" ").trim())}for(const t of e.attributes.data){if(!n.has(t))continue;let r=n.get(t).split(f).filter(t=>!!t);const i=`data-${t}`;if(n.has(i)){if(!e.attributes.merge.has(i))throw new Error(`Can not transform attribute to data-attribute, data-attribute already exists. [${t}]`);const o=n.get(i).split(f).filter(t=>!!t);if(e.xhtml&&!r.length&&!o.length)continue;r=[...o,...r]}n.set(i,(u.has(t)?[...new Set(r)]:r).join(" ").trim()),e.attributes.remove.has(t)||e.attributes.remove.add(t)}for(const t of e.attributes.remove)n.has(t)&&n.delete(t);return`<svg${n.size?` ${[...n.keys()].filter(t=>!!t).map(t=>`${t}="${n.get(t)}"`).join(" ")}`:""}>${i}</svg>`})})(r,t),s=y(n);((t=null,e=null)=>{if(!t)throw new Error("Missing required argument! [node]");if(!e)throw new Error("Missing required argument! [newNode]");if(!t.parentNode)throw new Error("Missing required argument property! [node.parentNode]");t.parentNode.replaceChild(e,t)})(t,s)}).catch(console.error)},E=(t=null,r=null,n=null)=>{if(!t)throw new Error("Missing required argument! [node]");if(!n)throw new Error("Missing required argument! [vnode]");if(t[i]||(t[i]=new Set),!t[i].has("processed")){if(t[i].add("processed"),n.data.directives.length>1)throw new Error(`Node has more than 1 directive! [vnode.data.directives=${JSON.stringify(n.data.directives.map(t=>t.name))}]`);n.data.directives.pop().name===e.directives.inlineSprite&&t[i].add("sprite"),!e._observer&&t.dataset.src&&(t.src=t.dataset.src,delete t.dataset.src),t.dataset.src?m().observe(t):S(t)}};t.directive(e.directives.inline,{bind:E}),t.directive(e.directives.inlineSprite,{bind:E})}}}]).default}));